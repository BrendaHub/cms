<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shishuo.cms.dao.FileDao">

	<select id="getFileById" parameterType="long"
		resultType="com.shishuo.cms.entity.File">
		select * from file where fileId=#{fileId}
	</select>
	
	<insert id="addFile" parameterType="com.shishuo.cms.entity.File">
		insert into file(folderId,name,url,images,description,type,createTime)
		value(#{folderId},#{name},#{url},#{images},#{description},#{type},#{createTime})
		<selectKey resultType="long" keyProperty="fileId">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>
	
	<delete id="deleteFile" parameterType="com.shishuo.cms.entity.File">
		delete from file where fileId=#{fileId}
	</delete>
	<select id="getFileListByFoderId" 
		resultType="com.shishuo.cms.entity.File">
		select * from file where folderId=#{folderId} limit #{offset},#{rows}
	</select>
	
	<select id="getFileListByFoderIdCount" 
		resultType="Integer">
		select count(*) from file where folderId=#{folderId}
	</select>
	
	<update id="updateFile" parameterType="com.shishuo.cms.entity.File">
		update file set folderId=#{folderId},name=#{name},url=#{url},
	</update>
	
	<select id="getFolderId" 
		resultType="com.shishuo.cms.entity.File">
		select * from file where folderId=#{folderId}
	</select>
	
	<select id="getAllList"
		resultType="com.shishuo.cms.entity.File">
		select * from file limit #{offset},#{rows}
	</select>
	
	<select id="getAllListCount"
		resultType="long">
		select count(*) from file
	</select>
</mapper>  
